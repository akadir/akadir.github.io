{"componentChunkName":"component---src-templates-blog-post-js","path":"/2020/04/01-git-sparse-checkout/","result":{"data":{"site":{"siteMetadata":{"title":"akadir's blog"}},"markdownRemark":{"id":"510fdb2c-34ed-59ba-a3d4-d7b5b99b1ef4","excerpt":"Today I have learned that there is an option to fetch only specific folders or files from remote git repository. Yes, you are right, it seems like the opposite…","html":"<p>Today I have learned that there is an option to fetch only specific folders or files from remote git repository. Yes, you are right, it seems like the opposite of .gitignore.</p>\n<p>So, how do we use this?</p>\n<p>Let’s say we will fetch remote repository that structured as shown in below:</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">.\n├── folder-we-want\n│   ├── file-1.jar\n│   └── file-2.jar\n├── folder-we-do-not-want\n│   ├── other-file.python\n│   └── another-file.cpp\n└── README.md</code></pre></div>\n<p>But we only want to fetch <code class=\"language-text\">folder-we-want</code>’s content and <code class=\"language-text\">README.md</code> file. To do that, first create a directory to fetch this imaginary repository and run <code class=\"language-text\">git init</code> and add our remote url.</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">mkdir imaginary-repo\ncd imaginary-repo\ngit init\ngit remote add –f &lt;imaginary-repo-url&gt;</code></pre></div>\n<p>After that we need to enable sparse checkout using this command:</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">git config core.sparsecheckout true</code></pre></div>\n<p>Now we can add folder path we do not want in our local repository into <code class=\"language-text\">.git/info/sparse-checkout</code>. Our updated<code class=\"language-text\">.git/info/sparse-checkout</code> file content should be as below:</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">folder-we-do-not-want</code></pre></div>\n<p><i>Note: in git-sparse-checkout documentation it is stated that, by default, sparse-checkout file uses the same syntax as .gitignore files.</i></p>\n<p>After all these modifications, when we fetch the repository with <code class=\"language-text\">git pull &lt;remote&gt; &lt;branch&gt;</code> command our local directory(<code class=\"language-text\">imaginary-repo</code>)‘s structure should be as below:</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">├── folder-we-want\n│   ├── file-1.jar\n│   └── file-2.jar\n└── README.md</code></pre></div>\n<p>Thanks to sparse checkout, we do not have the folder named <code class=\"language-text\">folder-we-do-not-want</code>.</p>\n<p>We also can use sparse-checkout in existing local repositories as below. The only difference, after enabling sparse checkout and updating the <code class=\"language-text\">.git/info/sparse-checkout</code>file, we should run this command: </p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">git config core.sparsecheckout true\necho folder-we-do-not-want &gt;&gt; .git/info/sparse-checkout\necho another/unnecessary/folder &gt;&gt; .git/info/sparse-checkout\ngit read-tree -mu HEAD</code></pre></div>\n<hr>\n<p><i>You can read detailed documentation from here:\n<a href=\"https://git-scm.com/docs/git-sparse-checkout\" target=\"_blank\">git-sparse-checkout</a>\nand more detailed and experimental blog post from here: <a href=\"https://github.blog/2020-01-17-bring-your-monorepo-down-to-size-with-sparse-checkout/\" target=\"_blank\">Bring your monorepo down to size with sparse-checkout</a></i></p>","frontmatter":{"title":"git sparse checkout","date":"April 20, 2020","description":"What if we only want to fetch only specific part of the remote git repository?"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/2020/04/01-git-sparse-checkout/","previous":{"fields":{"slug":"/2019/11/03-install_sonarqube_server/"},"frontmatter":{"title":"Guide To Install SonarQube Server"}},"next":null}}}